<script>

</script>


<form action="{uri_baseurl(index.php)}?page=my-import-presets-edit&DO=SAVE_DATA" method="POST" class="form form-horizontal" id="importPresetEditorTypeForm" enctype="multipart/form-data">

	{if FLASHMESSAGES}
	<div class="alert alert-danger">{FLASHMESSAGES}</div>
	{endif}

	<div class="form-group">
		<label class="control-label design-input-label">[[ translation : marketplace : import.preset.type :: Vorlagen Typ ]]:</label>
		<div class="design-input-field">
			<div class="radio">
				<label>
					<input type="radio" name="PRESET_TYPE" value="Csv" onchange="ipe.toggleTypeConfig()" {if PRESET_TYPE_Csv || !PRESET_TYPE}checked{endif}>
					[[ translation : marketplace : import.file.csv :: CSV Datei ]]
				</label>
			</div>
			<div class="radio">
				<label>
					<input type="radio" name="PRESET_TYPE" value="Xml" onchange="ipe.toggleTypeConfig()" {if PRESET_TYPE_Xml}checked{endif}>
					[[ translation : marketplace : import.file.xml :: XML Datei ]]
				</label>
			</div>
			{if eBayConfigured}
			<div class="radio">
				<label>
					<input type="radio" name="PRESET_TYPE" value="eBay" onchange="ipe.toggleTypeConfig()" {if PRESET_TYPE_eBay}checked{endif}>
					[[ translation : marketplace : import.file.eBay :: eBay Account ]]
				</label>
			</div>
			{endif}
		</div>
	</div>

	<div class="form-group">
		<label class="control-label design-input-label">[[ translation : marketplace : import.preset.description :: Vorlagen Bezeichnung ]]:</label>
		<div class="design-input-field">
			<input class="form-control" type="text" name="PRESET_NAME" value="{PRESET_NAME}">
		</div>
	</div>

	<hr>

	{if ID_IMPORT_PRESET}
		<div class="alert alert-danger">
			[[
				translation : marketplace : import.preset.editor.preset.update.notice ::
				Achtung, die Import Vorlage existiert bereits. Wenn Sie eine neue Datei hochladen, werden bereits getätigte Zuordnungen entfernt.
			]]
		</div>
	{endif}

	<div class="TYPE_CONFIG_CONTAINER TYPE_CONFIG_Csv" >
		<div class="form-group">
			<label class="control-label design-input-label">[[ translation : marketplace : import.preset.file :: Vorlagen Datei ]]:</label>
			<div class="design-input-field">
				<p class="text-muted">[[ translation : marketplace : import.via.file.upload :: per Datei Upload ]] (max {filesize({UPLOAD_MAX_FILESIZE})})</p>
	
				<p ><input type="file" name="PRESET_FILE"></p>
	
				<p><strong>[[ translation : marketplace : import.or :: oder ]]</strong></p>
	
				<p class="text-muted">[[ translation : marketplace : import.via.url :: per Url ]]</p>
	
				<input class="form-control" type="text" name="PRESET_FILE_URL" value="{PRESET_FILE_URL}" placeholder="[[ translation : marketplace : import.via.url.placeholder :: http://www.example.com/ihredatei.csv ]]">
			</div>
		</div>
		<div class="form-group">
			<label class="control-label design-input-label">[[ translation : marketplace : import.preset.editor.type.csv.config.fileCharset :: Zeichensatz ]]:</label>
			<div class="design-input-field">
				<div class="row">
					<div class="col-xs-6">
						<select id="PRESET_TYPE_CONFIG_fileCharset_select" data-selected="{PRESET_TYPE_CONFIG_fileCharset}" class="form-control" type="text" name="PRESET_TYPE_CONFIG[fileCharset]">
							<option value="UTF-8">UTF-8</option>
							<option value="ISO-8859-15">ISO-8859-15</option>
							<option value="ISO-8859-2">ISO-8859-2</option>
							<option value="ISO-8859-1">ISO-8859-1</option>
							<option value="other">Anderes</option>
						</select>
					</div>
					<div class="col-xs-6">
						<input id="PRESET_TYPE_CONFIG_fileCharset_input" class="form-control" type="text" name="PRESET_TYPE_CONFIG[fileCharset]" value="{if PRESET_TYPE_CONFIG_fileCharset}{htm(PRESET_TYPE_CONFIG_fileCharset)}{else}UTF-8{endif}">						
					</div>
				</div>
			</div>
		</div>
		<div class="form-group">
			<label class="control-label design-input-label">[[ translation : marketplace : import.preset.editor.type.csv.config.fileDelimiter :: CSV Trennzeichen ]]:</label>
			<div class="design-input-field">
				<div class="row">
					<div class="col-xs-6">
						<select id="PRESET_TYPE_CONFIG_fileDelimiter_select" class="form-control" type="text" name="PRESET_TYPE_CONFIG[fileDelimiter]">
							<option value="_comma"{if PRESET_TYPE_CONFIG_fileDelimiter_comma} selected{endif}>Komma (,)</option>
							<option value="_semicolon"{if PRESET_TYPE_CONFIG_fileDelimiter_semicolon} selected{endif}>Semikolon (;)</option>
							<option value="_tab"{if PRESET_TYPE_CONFIG_fileDelimiter_tab} selected{endif}>Tabulator</option>
							<option value="other"{if PRESET_TYPE_CONFIG_fileDelimiter_other} selected{endif}>Anderes</option>
						</select>
					</div>
					<div class="col-xs-6">
						<input id="PRESET_TYPE_CONFIG_fileDelimiter_input" class="form-control" type="text" name="PRESET_TYPE_CONFIG[fileDelimiter]" value="{if PRESET_TYPE_CONFIG_fileDelimiter_other}{htm(PRESET_TYPE_CONFIG_fileDelimiter)}{else};{endif}">						
					</div>
				</div>
			</div>
		</div>
		<div class="form-group">
			<label class="control-label design-input-label">[[ translation : marketplace : import.preset.editor.type.csv.config.fileEnclosureCharacter :: CSV Feld-Begrenzungs Zeichen ]]:</label>
			<div class="design-input-field">
				<input class="form-control" type="text" name="PRESET_TYPE_CONFIG[fileEnclosureCharacter]" value="{if PRESET_TYPE_CONFIG_fileEnclosureCharacter}{htm(PRESET_TYPE_CONFIG_fileEnclosureCharacter)}{else}&quot;{endif}">
			</div>
		</div>
		<div class="form-group">
			<label class="control-label design-input-label">[[ translation : marketplace : import.preset.editor.type.csv.config.fileEscapeCharacter :: CSV Maskierungs-Zeichen ]]:</label>
			<div class="design-input-field">
				<input class="form-control" type="text" name="PRESET_TYPE_CONFIG[fileEscapeCharacter]" value="{if PRESET_TYPE_CONFIG_fileEscapeCharacter}{htm(PRESET_TYPE_CONFIG_fileEscapeCharacter)}{else}\{endif}">
			</div>
		</div>
		{PRESET_TYPE_CONFIG_TEMPLATES}
	</div>
	
	<div class="TYPE_CONFIG_CONTAINER TYPE_CONFIG_Xml">
		<div class="form-group">
			<label class="control-label design-input-label">[[ translation : marketplace : import.preset.file :: Vorlagen Datei ]]:</label>
			<div class="design-input-field">
				<p class="text-muted">[[ translation : marketplace : import.via.file.upload :: per Datei Upload ]] (max {filesize({UPLOAD_MAX_FILESIZE})})</p>
	
				<p ><input type="file" name="PRESET_FILE"></p>
	
				<p><strong>[[ translation : marketplace : import.or :: oder ]]</strong></p>
	
				<p class="text-muted">[[ translation : marketplace : import.via.url :: per Url ]]</p>
	
				<input class="form-control" type="text" name="PRESET_FILE_URL" value="{PRESET_FILE_URL}" placeholder="[[ translation : marketplace : import.via.url.placeholder :: http://www.example.com/ihredatei.csv ]]">
			</div>
		</div>
		{PRESET_TYPE_CONFIG_TEMPLATES}
	</div>
	
	<div class="TYPE_CONFIG_CONTAINER TYPE_CONFIG_eBay">
		<div class="TYPE_CONFIG_AJAX">
			[[ translation : marketplace : import.preset.editor.type.ebay.config.loading :: eBay-Konfiguration wird geladen ... ]]
		</div>
	</div>


	<div class="form-actions text-right">
		<button type="submit" class="btn btn-primary">Weiter</button>
		{if ID_IMPORT_PRESET}
			<button class="btn btn-default" onclick="ipe.saveFormAndClose(); ">[[ translation : marketplace : import.save.and.close :: Speichern und schließen ]]</button>
		{endif}
	</div>
</form>

<script>
	jQuery(function() {		
		ipe.toggleTypeConfig();
		
		// Preselect select inputs
		jQuery("select[data-selected]").each(function() {
			jQuery(this).val( jQuery(this).attr("data-selected") );
		});
		
		// Enable/Disable custom delimiter input
		var updateFileDelimiterSelect = function(input) {
			if (jQuery(input).val() == "other") {
				jQuery("#PRESET_TYPE_CONFIG_fileDelimiter_input").prop("disabled", false);
			} else {
				jQuery("#PRESET_TYPE_CONFIG_fileDelimiter_input").prop("disabled", true);
			}
		};
		jQuery("#PRESET_TYPE_CONFIG_fileDelimiter_select").change(function() {
			updateFileDelimiterSelect(this);
		});
		updateFileDelimiterSelect( jQuery("#PRESET_TYPE_CONFIG_fileDelimiter_select") );
		
		// Enable/Disable custom charset input
		var updateFileCharsetSelect = function(input) {
			if (jQuery(input).val() == "other") {
				jQuery("#PRESET_TYPE_CONFIG_fileCharset_input").prop("disabled", false);
			} else {
				jQuery("#PRESET_TYPE_CONFIG_fileCharset_input").prop("disabled", true);
			}
		};
		jQuery("#PRESET_TYPE_CONFIG_fileCharset_select").change(function() {
			updateFileCharsetSelect(this);
		});
		updateFileCharsetSelect( jQuery("#PRESET_TYPE_CONFIG_fileCharset_select") );
	})
</script>