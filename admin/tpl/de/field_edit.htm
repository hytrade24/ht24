
<h1>{if ID_FIELD_DEF}Feld {htm(V1)} bearbeiten{else}Neues Feld hinzuf&uuml;gen{endif}</h1>
<p>
	Bitte beachten Sie, dass der Typ eines Felds nur ge&auml;ndert werden kann, wenn sich noch keine Daten
	in dem Feld befinden!
</p>
<script type="text/javascript">
	id_field = '{ID_FIELD_DEF}';
</script>
<table>
	<tr>
		<td valign="top">
			<form method="post" action="index.php" ID="F_EDIT">
				<input type="hidden" name="page" value="table_action" />
				<input type="hidden" name="ACT" value="FIELD_EDIT" />
				<input type="hidden" name="table" value="{table}" />
				<input type="hidden" name="ID_FIELD_DEF" value="{ID_FIELD_DEF}" />
				<input type="hidden" name="F_NAME" value="{F_NAME}" />
				<input type="hidden" name="frame" value="ajax" />
			{if !USE_EAN}
				<input type="hidden" name="B_HDB_ENABLED" value="{B_HDB_ENABLED}" />
			{endif}

				<div id="MSG"></div>
				
				<table class="formTable" cellspacing="0">
					{if IS_MASTER}
						<input type="hidden" name="IS_MASTER" value="1" />
					{endif}

					{if !ID_FIELD_DEF}
						<tr>
							<th>SQL Feld Name</th>
							<td>
								<input type="text" name="SQL_FIELD" value="{if SQL_FIELD}{htm(SQL_FIELD)}{else}{SUGGESTION_F_NAME}{endif}" size="62" />
							</td>
						</tr>
					{endif}
					<tr>
						<th>Name des Felds</th>
						<td>
							<input type="text" name="V1" value="{htm(V1)}" size="62" />
						</td>
					</tr>
                    <tr>
						<th>Interne Beschreibung</th>
						<td>
							<input type="text" name="F_DEC_INTERN" value="{F_DEC_INTERN}" size="62" />
						</td>
					</tr>
					<tr>
						<th>Einheit<br />z.B. kg oder Km.</th>
						<td><input type="text" name="V2" value="{htm(V2)}" size="62" /></td>
					</tr>	
					<tr>
						<th>Typ des Felds</th>
						<td>
							{if FK_LISTE}
								<input type="hidden" name="FK_LISTE" value="{FK_LISTE}" />
								<input id="ftypen" type="hidden" name="F_TYP" value="{F_TYP}" />
								<strong>{htm(F_TYP)}</strong><br />
								<span class="error">Der Feldtyp kann nicht mehr ge&auml;ndert werden, da bereits Daten enthalten sind!</span>
							{else}
								<select id="ftypen" name="F_TYP" onchange="chFieldType(this.value); vonbis(this.value);">
									<option value="">Bitte w&auml;hlen!</option>
									{field_types}
								</select>
								{if ID_FIELD_DEF && !CHANGEABLE}
									<p class="error">
										ACHTUNG!!!
										Das &Auml;ndern des Feldtyps kann Datenverlust zur Folge haben!!!
									</p>
								{endif}
							{endif}
						</td>
					</tr>
					
					
					
					<tr style="display: none; background-color: #e2e2e2;"  id="LISTEN">
					</tr>
					
					
					
					<tr>
						<th colspan="2">
							Eingabefelder beim Einstellen von Artikeln
						</th>
					</tr>
					<tr>
						<th valign="top">Beschreibung</th>
						<td>
							<textarea name="T1_DESC" rows="5" cols="39">{htm(T1_DESC)}</textarea>
						</td>
					</tr>
					<tr>
						<th valign="top">Hilfe</th>
						<td>
							<textarea name="T1_HELP" rows="5" cols="39">{htm(T1_HELP)}</textarea>
						</td>
					</tr>
					
					
					
					<tr>
						<th>Pflichtfeld?</th>
						<td><input type="checkbox" name="B_NEEDED" value="1" class="nob" {if B_NEEDED}checked{endif} /></td>
					</tr>
					
					
					
					<tr>
						<th style="vertical-align:top;">Suchfeld?</th>
						<td>
							<input type="radio" name="B_SEARCH" value="0" class="nob" {if !B_SEARCH}checked{endif} onchange="return fieldUpdateMask(this);" /> Nein<br />
							<span id="s_date">
								<input id="xSearchDef" type="radio" name="B_SEARCH" value="1" class="nob" {if B_SEARCH === 1}checked{endif} onchange="return fieldUpdateMask(this);" /> Ja<br />
							</span>
							<span id="xSearch" style="display:none;">
								<input id="xSeachLock" type="radio" name="B_SEARCH" value="2" class="nob" {if B_SEARCH === 2}checked{endif} onchange="return fieldUpdateMask(this);" /> Von-Bis Suche
							</span>
							
							<input type="hidden" name="T2_DESC" value="{htm(T2_DESC)}" />
							<input type="hidden" name="T2_HELP" value="{htm(T2_HELP)}" />
						</td>
					</tr>
					<tr data-condition="SEARCH_ENABLED">
						<th colspan="2">
							Eingabefelder bei der Suchmaske
						</th>
					</tr>
					<tr data-condition="SEARCH_ENABLED">
						<th valign="top">Beschreibung</th>
						<td>
							<textarea name="T2_DESC" rows="5" cols="39">{htm(T2_DESC)}</textarea>
						</td>
					</tr>
					<tr data-condition="SEARCH_ENABLED">
						<th valign="top">Hilfe</th>
						<td>
							<textarea name="T2_HELP" rows="5" cols="39">{htm(T2_HELP)}</textarea>
						</td>
					</tr>
					
					
					<tr>
						<th style="vertical-align:top;">Bei Import verwenden?</th>
						<td>
							<label>
								<input type="radio" name="B_IMPORT" value="1" class="nob" {if B_IMPORT}checked{endif} onchange="return fieldUpdateMask(this);" /> Ja<br />
							</label>
							<label>
								<input type="radio" name="B_IMPORT" value="0" class="nob" {if !B_IMPORT}checked{endif} onchange="return fieldUpdateMask(this);" /> Nein<br />
							</label>
							
							<input type="hidden" name="T3_DESC" value="{htm(T3_DESC)}" />
							<input type="hidden" name="T3_HELP" value="{htm(T3_HELP)}" />
						</td>
					</tr>
					<tr data-condition="IMPORT_ENABLED">
						<th colspan="2">
							Zuordnung beim Import
						</th>
					</tr>
					<tr data-condition="IMPORT_ENABLED">
						<th valign="top">Beschreibung</th>
						<td>
							<textarea name="T3_DESC" rows="5" cols="39">{htm(T3_DESC)}</textarea>
						</td>
					</tr>
					
					
					
					{if USE_EAN}
					<tr>
						<th style="vertical-align:top;">In Produkt Datenbank verwenden?</th>
						<td>
							<input type="radio" name="B_HDB_ENABLED" value="0" class="nob" {if !B_HDB_ENABLED}checked{endif} /> Nein<br />
							<span>
								<input type="radio" name="B_HDB_ENABLED" value="1" class="nob" {if B_HDB_ENABLED === 1}checked{endif} /> Ja<br />
							</span>
						</td>
					</tr>
					{endif}
                    {if !ID_FIELD_DEF}
                    <tr>
                        <th>In Kategorien hinzufügen</th>
                        <td>
                            <label>
                                <input type="checkbox" name="INITIALLY_ENABLED" value="1" />
                                Feld nach dem hinzufügen in allen Kategorien mit dieser Artikeltabelle aktivieren.
                            </label>
                        </td>
                    </tr>
                    {endif}
					{if T_NAME}
					<tr>
						<th>Name in DB</th>
						<td>{htm(T_NAME}</td>
					</tr>
					{endif}
					<tr class="footer">
						<td id="S_EDIT" colspan="2" align="right"><input type="button" value="Speichern" onclick="saveField();"/></td>
					</tr>
				</table>
			</form>	
		</td>
		<td valign="top">
			{if WARNINGS}
				<h2 class="error">WARNUNG!</h2>
				<p class="error">
					Bei einer &Auml;nderung dieses Felds sind bis zu {WARNINGS}
					Datens&auml;tze gef&auml;hrdet! Eine &Auml;nderung kann diese Daten unbrauchbar machen!
				</p>
			{else}
				&nbsp;
			{endif}
			<!-- 
			<h2>Beschreibung aufteilen</h2>
			<p>Bitte nutzen Sie || Um die Beschreibungstexte aufzuteilen. In den Formularen wird nur 
			der erste Teile vor dem || angezeigt. Der Rest erscheint erst nach einem Klick auf das 
			Hilfe Symbol.</p>
			 -->
		</td>
	</tr>
</table>	
<script type="text/javascript">
	{if FK_LISTE}
		chFieldType($('ftypen').value, {FK_LISTE});
	{endif}
	// INT, FLOAT, DATE
	
	fieldUpdateMaskInitial()
</script>