<div id="googlemap" style="width: 100%; height: 100%;">
  
</div>

<script type="text/javascript" async="" defer="" src="https://maps.googleapis.com/maps/api/js{if API_KEY}?key={API_KEY}{endif}"></script>
<script type="text/javascript">
window.onload = function() {
  
  var mapTooltip = function(details) {
    var content = 
      (typeof details.URL != "undefined" ? "<a href=\""+details.URL+"\">"+details.NAME+"</a>" : details.NAME)+"<br />"+
      details.STREET+"<br />"+
      details.ZIP+" "+details.CITY+"<br />"+
      details.COUNTRY;
    return content;
  };
  
  var mapOptions = {
    zoom:           13,
    zoomMax:        15,
    mapTypeControl: false,
    mapTypeId:      google.maps.MapTypeId.ROADMAP, 
    maxZoom:        12
  };  
  var mapObject = new google.maps.Map(document.getElementById("googlemap"), mapOptions);
  var mapWindow = new google.maps.InfoWindow({
    content: "Loading..."
  });
  var mapBounds = null;
  
  var markers = {JSON_MARKERS};
  
  for (var markerIndex in markers) {
    var markerDetails = markers[markerIndex];
    var markerPos = new google.maps.LatLng(markerDetails.LATITUDE, markerDetails.LONGITUDE);
    if (mapBounds === null) {
      mapBounds = new google.maps.LatLngBounds(markerPos, markerPos)
    } else {
      mapBounds.extend(markerPos);
    }
    var markerObject = new google.maps.Marker({
      position: markerPos,
      map: mapObject,
      details: markerDetails
    });
    google.maps.event.addListener(markerObject, 'click', function() {
      mapWindow.setContent(mapTooltip(this.details));
      mapWindow.open(mapObject, this);
    });
  }
  if (markers.length == 1) {
    mapWindow.setContent(mapTooltip(markerDetails));
    mapWindow.open(mapObject, markerObject);
  }
  if (mapBounds !== null) {
    mapObject.fitBounds(mapBounds);
  }
  
};
</script>