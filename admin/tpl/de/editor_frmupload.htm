{loadperm(editor_images)}
    <link href="../fckeditor/editor/filemanager/browser/default/browser.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="../fckeditor/editor/filemanager/browser/default/js/common.js"></script>
    <script language="javascript">

function SetCurrentFolder( resourceType, folderPath )
{
  var sUrl = oConnector.ConnectorUrl +'Command=FileUpload' ;
  sUrl += '&Type=' + resourceType ;
  sUrl += '&CurrentFolder=' + folderPath ;

  document.getElementById('frmUpload').action = sUrl ;
}

function OnSubmit()
{
  if ( document.getElementById('NewFile').value.length == 0 )
  {
    alert( 'Please select a file from your computer' ) ;
    return false ;
  }

  // Set the interface elements.
  document.getElementById('eUploadMessage').innerHTML = 'Upload a new file in this folder (Upload in progress, please wait...)' ;
  document.getElementById('btnUpload').disabled = true ;

  return true ;
}

function OnUploadCompleted( errorNumber, fileName )
{
  // Reset the Upload Worker Frame.
  window.parent.frames['frmUploadWorker'].location = 'about:blank' ;

  // Reset the upload form (On IE we must do a little trick to avout problems).
  if ( document.all )
    document.getElementById('NewFile').outerHTML = '<input id="NewFile" name="NewFile" style="WIDTH: 100%" type="file">' ;
  else
    document.getElementById('frmUpload').reset() ;

  // Reset the interface elements.
  document.getElementById('eUploadMessage').innerHTML = 'Upload a new file in this folder' ;
  document.getElementById('btnUpload').disabled = false ;

  switch ( errorNumber )
  {
    case 0 :
      window.parent.frames['frmResourcesList'].Refresh() ;
      break ;
    case 201 :
      window.parent.frames['frmResourcesList'].Refresh() ;
      alert( 'A file with the same name is already available. The uploaded file has been renamed to "' + fileName + '"' ) ;
      break ;
    case 202 :
      alert( 'Invalid file' ) ;
      break ;
    default :
      alert( 'Error on file upload. Error number: ' + errorNumber ) ;
      break ;
  }
}

window.onload = function()
{
  window.top.IsLoadedUpload = true ;
}
    </script>

    <form id="frmUpload" action="" target="frmUploadWorker" method="post" enctype="multipart/form-data" onsubmit="return OnSubmit();">
      userid: {ID_USER}
      <table height="100%" cellSpacing="0" cellPadding="0" width="100%" border="0">
        <tr>
          <td nowrap>
            <span id="eUploadMessage">Upload a new file in this folder</span><br>
            <table cellSpacing="0" cellPadding="0" width="100%" border="0">
              <tr>
                <td width="100%"><input id="NewFile" name="NewFile" style="WIDTH: 100%" type="file"{if !perm_editor_images_C} disabled{endif}>  </td>
                <td nowrap>&nbsp;<input id="btnUpload" type="submit" value="Upload"{if !perm_editor_images_C} disabled{endif}></td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
    </form>



